---
title: Do not edit
Date: 2023-04-11T09:33:45.000Z
LastEditors: sunflower-dotcom 707339665@qq.com
LastEditTime: 2023-04-11T09:34:21.000Z
FilePath: \Notebook\Shell\for.md
categories: Do not edit
---

# FOR

Windows bat脚本的for语句基本形态如下：

```java
在cmd窗口中：for %I in (command1) do command2 在批处理文件中：for %%I in (command1) do command2
```

之所以要区分cmd窗口和批处理文件两种环境，是因为在这两种环境下，命令语句表现出来的行为虽然基本一样，但是在细节上还是稍有不同，最明显的一个差异就是：在cmd窗口中，for之后的形式变量I必须使用单百分号引用，即%I；而在批处理文件中，引用形式变量I必须使用双百分号，即%%I。为了方便起见，若不是特别强调，以下的讲解都以批处理文件环境为例。

我们先来看一下for语句的基本要素都有些什么：

1. for、in和do是for语句的关键字，它们三个缺一不可；
2. %%I是for语句中对形式变量的引用，即使变量l在do后的语句中没有参与语句的执行，也是必须出现的；
3. in之后，do之前的括号不能省略；
4. command1表示字符串或变量，command2表示字符串、变量或命令语句；

&#x20; 下面来看一个Windows bat脚本的demo(记为demo1)：

```php
@echo off
for  %%I in (ABC) do echo %%I
pause
```

保存为.bat文件(批处理文件)并执行，将会在弹出的批处理窗口中看到这样的信息：

![](https://img-blog.csdn.net/20180320184647370)

对批处理文件的for循环就是这样简单，下面来看看for语句的注意事项，并运行更复杂的for循环实例。

1. for语句的形式变量I，可以换成26个字母中的任意一个，这些字母会区分大小写，也就是说，%%I和%%i会被认为不是同一个变量；形式变量I还可以换成其他的字符，但是，为了不与批处理中的%0～%9这10个形式变量发生冲突，请不要随意把%%I替换为%%0～%%9中的任意一个；
2. in和do之间的command1表示的字符串或变量可以是一个，也可以是多个，每一个字符串或变量，我们称之为一个元素，每个元素之间，用空格键、跳格键、逗号、分号或等号分隔；
3.  for语句依次提取command1中的每一个元素，把它的值赋予形式变量I，带到do后的command2中参与命令的执行；并且每次只提取一个元素，然后执行一次do后的命令语句，而无论这个元素是否被带到command2中参与了command2的运行；当执行完一次do后的语句之后，再提取command1中的下一个元素，再执行一次command2，如此循环，直到command1中的所有元素都已经被提取完毕，该for语句才宣告执行结束。

    有了以上的基础，我们再来看下面这个例子，这个例子修改了demo1中的部分内容(记为demo2)，结果将大不一样：

```php
@echo off
for  %%I in (A,B,C) do echo %%I
pause
```

&#x20; 运行结果如下：

![](https://img-blog.csdn.net/20180320184632835)

如果把 bbs.bathome.cn 这个字符串中的点号换为空格、跳格或等号，执行结果将和demo2的执行结果别无二致。

现在，来分析一下demo2代码中for语句的执行过程：

&#x20; 1.for语句以逗号为分隔符，把 A,B,C 这个字符串切分成三个元素：A、B和C，由此决定了do后的语句将会被执行3次；&#x20;

2.第一次执行过程是这样的：先把 bbs 这个字符串作为形式变量I的值，带入do后的语句中加以执行，也就是执行 echo %%I 语句，此时的I值为A，因此，第一次执行的结果，将会在屏幕上显示A这个字符串；第二次执行和第一次执行的过程是一样的，只不过此时I的值已经被替换为command1中的第二个元素了，也就是 B 这个字符串；如此循环，当第三次echo执行完毕之后，整条for语句才算执行完毕，此时，将执行下一条语句，也就是pause命令。

&#x20;高级用法：

1\)搜索当前目录下有哪些文件？

```cobol
@echo off
for %%i in (*.*) do echo "%%i"
pause
```

2\)搜索当前目录下所有的文本文件？

```cobol
@echo off
for %%i in (*.txt) do echo "%%i"
pause
```
